<h1 align="center">search-engine-spring</h1>

## Описание
Данный проект является локальным поисковым движком по сайту с веб-интерфейсом. Сначала строится "карта" сайта или сайтов (список адресов указывается в настройках проекта). 
Полученные данные обрабатываются и сохраняются в базу данных. Далее можно осуществлять поисковые запросы по обработанным сайтам.

## О проекте
#### Используются технологии: Spring, Sql, Lombook, ForkJoin, Thread. Парсинг сайтов реализован в многопотомчном режиме, для парсинга используется Jsoup.
### Управление через веб-интерфейс
Главная страница по умолчанию доступна по ссылке `/admin` (проект локальный и по умолчанию полный адрес выглядит так: `http://localhost:8080/admin`).
![search_engine_001](https://user-images.githubusercontent.com/69323608/198315123-2a80fe74-c31c-4a3a-a7eb-6b1c89f30d5f.png)
- **Dashboard**. Эта вкладка открывается по умолчанию. На ней отображается общая статистика по всем сайтам, а также детальная статистика и статус по 
каждому из сайтов (статистика, получаемая по запросу /statistics).
![search_engine_004](https://user-images.githubusercontent.com/69323608/198315599-8a228ba3-129f-43ef-bdda-dfc7a6d11958.png)

- **Management**. На этой вкладке находятся инструменты управления поисковым движком — запуск и остановка полной индексации (переиндексации), а 
также возможность добавить (обновить) отдельную страницу по ссылке.
![search_engine_002](https://user-images.githubusercontent.com/69323608/198315690-0541aff3-daed-4251-bf26-3b4b616927a2.png)

- **Search**. Эта страница предназначена для тестирования поискового движка. На ней находится поле поиска, выпадающий список с выбором сайта для поиска, 
а при нажатии на кнопку «Найти» выводятся результаты поиска (по API-запросу /search).
![search_engine_005](https://user-images.githubusercontent.com/69323608/198315769-43641f58-6cf9-4f9a-a8ac-fbcd1f7a73a4.png)

### Запуск проекта
#### Обязательные настройки в файле `application.yml`:
> 1. Подключение к базе MySQL
- ПРИМЕР:
- spring:
  - datasource:
    - url: jdbc:mysql://localhost:3306/search_engine
    - username: user_name
    - password: password

> 2. Настройка обновления базы данных
- Пример
  - spring:
    - jpa:
      - hibernate:
        - ddl-auto: `create-drop`
        
Параметр `create-drop` будет пересоздавать базу при каждом перезапуске приложения, удаляя все данные из таблиц.
При установке параметра `update` все уже ранее записанные данные будут сохранены при перезапуске.

> 2. Список сайтов:
- Пример:
- config:
    - site:
        - -url: http://www.test.ru (ОБЯЗАТЕЛЬНО!!! В конце не надо ставить слэш)
        - name: Пример сайта

Новые сайты можно дописывать ниже в таком же формате. 
#### Настройки SQL.
> 1. Создать базу.
- `CREATE DATABASE search_engine;`

> 2. Уже после запуска проекта требуется вставить в таблицу `field` данные (таблица будет создана автоматически):
- `INSERT INTO search_engine.field VALUES (1, 'title', 'title', 1), (2, 'body', 'body', 0.8 );`

#### Работа программы.
> После запуска программа работает по адресу http://localhost:8080/admin/